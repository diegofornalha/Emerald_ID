{"version":3,"file":"sdk.modern.js","sources":["../src/utils/deprecate.js","../src/interaction/interaction.js","../src/build/build.js","../src/response/response.js","../src/build/build-get-block.js","../src/build/build-get-account.js","../src/decode/decode.js","../src/resolve/resolve-ref-block-id.js","../src/resolve/resolve-cadence.js","../src/resolve/resolve-arguments.js","../src/encode/encode.js","../src/resolve/voucher.js","../src/resolve/resolve-accounts.js","../src/resolve/resolve-signatures.js","../src/resolve/resolve-validators.js","../src/resolve/resolve-final-normalization.js","../src/resolve/resolve-voucher-intercept.js","../src/resolve/resolve.js","../src/build/build-invariant.js","../src/send/send.js","../src/decode/sdk-decode.js","../src/wallet-utils/encode-signable.js","../src/build/build-validator.js","../src/build/build-at-block-height.js","../src/build/build-at-block-id.js","../src/account/account.js","../src/block/block.js","../src/build/build-authorizations.js","../src/build/build-get-events.js","../src/build/build-get-events-at-block-height-range.js","../src/build/build-get-events-at-block-ids.js","../src/build/build-get-block-header.js","../src/build/build-get-collection.js","../src/build/build-get-transaction-status.js","../src/build/build-get-transaction.js","../src/build/build-limit.js","../src/build/build-arguments.js","../src/build/build-proposer.js","../src/build/build-payer.js","../src/build/build-ping.js","../src/build/build-ref.js","../src/build/build-script.js","../src/build/build-transaction.js","../src/build/build-voucher-intercept.js","../src/resolve/resolve-proposer-sequence-number.js","../src/test-utils/mock-send.js","../src/test-utils/authz-fn.js","../src/test-utils/run.js","../src/VERSION.js","../src/sdk.js"],"sourcesContent":["import * as logger from \"@onflow/util-logger\"\n\nconst buildWarningMessage = ({name, transitionsPath}) => {\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The ${name} builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: ${transitionsPath}\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst buildErrorMessage = ({name, transitionsPath}) => {\n  console.error(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The ${name} builder has been removed from the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: ${transitionsPath}\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst warn = deprecated => buildWarningMessage(deprecated)\n\nconst error = deprecated => {\n  buildErrorMessage(deprecated)\n}\n\nexport const deprecate = {\n  warn,\n  error,\n}\n\nconst getByValue = (map, searchValue) => {\n  for (let [key, value] of map.entries()) {\n    if (value === searchValue) return key;\n  }\n}\n\n// Allows access to old and new field names while showing deprecation warning for old\nexport const applyRenamings = (originalObject, deprecationsMap) => {\n  return new Proxy(originalObject, {\n    get: (obj, property) => {\n      if (getByValue(deprecationsMap, property)) {\n        const originalProperty = getByValue(deprecationsMap, property)\n        return Reflect.get(obj, originalProperty)\n      }\n      if (deprecationsMap.has(property)) {\n        logger.log({\n          title: \"FCL/SDK Deprecation Notice\",\n          message: `\"${property}\" will be deprecated in a future version.\n            Please use \"${deprecationsMap.get(property)}\" instead.`,\n          level: logger.LEVELS.warn\n        })\n      }\n      return Reflect.get(obj, property)\n    }\n  })\n}","import {invariant} from \"@onflow/util-invariant\"\n\nexport const UNKNOWN /*                       */ = \"UNKNOWN\"\nexport const SCRIPT /*                        */ = \"SCRIPT\"\nexport const TRANSACTION /*                   */ = \"TRANSACTION\"\nexport const GET_TRANSACTION_STATUS /*        */ = \"GET_TRANSACTION_STATUS\"\nexport const GET_ACCOUNT /*                   */ = \"GET_ACCOUNT\"\nexport const GET_EVENTS /*                    */ = \"GET_EVENTS\"\nexport const PING /*                          */ = \"PING\"\nexport const GET_TRANSACTION /*               */ = \"GET_TRANSACTION\"\nexport const GET_BLOCK /*                     */ = \"GET_BLOCK\"\nexport const GET_BLOCK_HEADER /*              */ = \"GET_BLOCK_HEADER\"\nexport const GET_COLLECTION /*                */ = \"GET_COLLECTION\"\n\nexport const BAD /* */ = \"BAD\"\nexport const OK /*  */ = \"OK\"\n\nexport const ACCOUNT /*  */ = \"ACCOUNT\"\nexport const PARAM /*    */ = \"PARAM\"\nexport const ARGUMENT /* */ = \"ARGUMENT\"\n\nexport const AUTHORIZER /* */ = \"authorizer\"\nexport const PAYER /*      */ = \"payer\"\nexport const PROPOSER /*   */ = \"proposer\"\n\nconst ACCT = `{\n  \"kind\":\"${ACCOUNT}\",\n  \"tempId\":null,\n  \"addr\":null,\n  \"keyId\":null,\n  \"sequenceNum\":null,\n  \"signature\":null,\n  \"signingFunction\":null,\n  \"resolve\":null,\n  \"role\": {\n    \"proposer\":false,\n    \"authorizer\":false,\n    \"payer\":false,\n    \"param\":false\n  }\n}`\n\nconst PRM = `{\n  \"kind\":\"${PARAM}\",\n  \"tempId\":null,\n  \"key\":null,\n  \"value\":null,\n  \"asParam\":null,\n  \"xform\":null,\n  \"resolve\": null\n}`\n\nconst ARG = `{\n  \"kind\":\"${ARGUMENT}\",\n  \"tempId\":null,\n  \"value\":null,\n  \"asArgument\":null,\n  \"xform\":null,\n  \"resolve\": null,\n  \"resolveArgument\": null\n}`\n\nconst IX = `{\n  \"tag\":\"${UNKNOWN}\",\n  \"assigns\":{},\n  \"status\":\"${OK}\",\n  \"reason\":null,\n  \"accounts\":{},\n  \"params\":{},\n  \"arguments\":{},\n  \"message\": {\n    \"cadence\":null,\n    \"refBlock\":null,\n    \"computeLimit\":null,\n    \"proposer\":null,\n    \"payer\":null,\n    \"authorizations\":[],\n    \"params\":[],\n    \"arguments\":[]\n  },\n  \"proposer\":null,\n  \"authorizations\":[],\n  \"payer\":[],\n  \"events\": {\n    \"eventType\":null,\n    \"start\":null,\n    \"end\":null,\n    \"blockIds\":[]\n  },\n  \"transaction\": {\n    \"id\":null\n  },\n  \"block\": {\n    \"id\":null,\n    \"height\":null,\n    \"isSealed\":null\n  },\n  \"account\": {\n    \"addr\":null\n  },\n  \"collection\": {\n    \"id\":null\n  }\n}`\n\nconst KEYS = new Set(Object.keys(JSON.parse(IX)))\n\nexport const interaction = () => JSON.parse(IX)\n\nconst CHARS = \"abcdefghijklmnopqrstuvwxyz0123456789\".split(\"\")\nconst randChar = () => CHARS[~~(Math.random() * CHARS.length)]\nexport const uuid = () => Array.from({length: 10}, randChar).join(\"\")\nexport const isNumber = d => typeof d === \"number\"\nexport const isArray = d => Array.isArray(d)\nexport const isObj = d => d !== null && typeof d === \"object\"\nexport const isNull = d => d == null\nexport const isFn = d => typeof d === \"function\"\n\nexport const isInteraction = ix => {\n  if (!isObj(ix) || isNull(ix) || isNumber(ix)) return false\n  for (let key of KEYS) if (!ix.hasOwnProperty(key)) return false\n  return true\n}\n\nexport const Ok = ix => {\n  ix.status = OK\n  return ix\n}\n\nexport const Bad = (ix, reason) => {\n  ix.status = BAD\n  ix.reason = reason\n  return ix\n}\n\nconst makeIx = wat => ix => {\n  ix.tag = wat\n  return Ok(ix)\n}\n\nexport const prepAccount = (acct, opts = {}) => ix => {\n  invariant(\n    typeof acct === \"function\" || typeof acct === \"object\",\n    \"prepAccount must be passed an authorization function or an account object\"\n  )\n  invariant(opts.role != null, \"Account must have a role\")\n\n  const ACCOUNT = JSON.parse(ACCT)\n  const role = opts.role\n  const tempId = uuid()\n\n  if (acct.authorization && isFn(acct.authorization)) acct = {resolve: acct.authorization}\n  if (!acct.authorization && isFn(acct)) acct = {resolve: acct}\n\n  ix.accounts[tempId] = {\n    ...ACCOUNT,\n    tempId,\n    ...acct,\n    role: {\n      ...ACCOUNT.role,\n      ...(typeof acct.role === \"object\" ? acct.role : {}),\n      [role]: true,\n    },\n  }\n\n  if (role === AUTHORIZER) {\n    ix.authorizations.push(tempId)\n  } else if (role === PAYER) {\n    ix.payer.push(tempId)\n  } else {\n    ix[role] = tempId\n  }\n\n  return ix\n}\n\nexport const makeArgument = arg => ix => {\n  let tempId = uuid()\n  ix.message.arguments.push(tempId)\n\n  ix.arguments[tempId] = JSON.parse(ARG)\n  ix.arguments[tempId].tempId = tempId\n  ix.arguments[tempId].value = arg.value\n  ix.arguments[tempId].asArgument = arg.asArgument\n  ix.arguments[tempId].xform = arg.xform\n  ix.arguments[tempId].resolve = arg.resolve\n  ix.arguments[tempId].resolveArgument = isFn(arg.resolveArgument) ? arg.resolveArgument.bind(arg) : arg.resolveArgument\n\n  return Ok(ix)\n}\n\nexport const makeUnknown /*                 */ = makeIx(UNKNOWN)\nexport const makeScript /*                  */ = makeIx(SCRIPT)\nexport const makeTransaction /*             */ = makeIx(TRANSACTION)\nexport const makeGetTransactionStatus /*    */ = makeIx(GET_TRANSACTION_STATUS)\nexport const makeGetTransaction /*          */ = makeIx(GET_TRANSACTION)\nexport const makeGetAccount /*              */ = makeIx(GET_ACCOUNT)\nexport const makeGetEvents /*               */ = makeIx(GET_EVENTS)\nexport const makePing /*                    */ = makeIx(PING)\nexport const makeGetBlock /*                */ = makeIx(GET_BLOCK)\nexport const makeGetBlockHeader /*          */ = makeIx(GET_BLOCK_HEADER)\nexport const makeGetCollection /*           */ = makeIx(GET_COLLECTION)\n\nconst is = wat => ix => ix.tag === wat\n\nexport const isUnknown /*                 */ = is(UNKNOWN)\nexport const isScript /*                  */ = is(SCRIPT)\nexport const isTransaction /*             */ = is(TRANSACTION)\nexport const isGetTransactionStatus /*    */ = is(GET_TRANSACTION_STATUS)\nexport const isGetTransaction /*          */ = is(GET_TRANSACTION)\nexport const isGetAccount /*              */ = is(GET_ACCOUNT)\nexport const isGetEvents /*               */ = is(GET_EVENTS)\nexport const isPing /*                    */ = is(PING)\nexport const isGetBlock /*                */ = is(GET_BLOCK)\nexport const isGetBlockHeader /*          */ = is(GET_BLOCK_HEADER)\nexport const isGetCollection /*           */ = is(GET_COLLECTION)\n\nexport const isOk /*  */ = ix => ix.status === OK\nexport const isBad /* */ = ix => ix.status === BAD\nexport const why /*   */ = ix => ix.reason\n\nexport const isAccount /*  */ = account => account.kind === ACCOUNT\nexport const isParam /*    */ = param => param.kind === PARAM\nexport const isArgument /* */ = argument => argument.kind === ARGUMENT\n\nconst hardMode = ix => {\n  for (let key of Object.keys(ix)) {\n    if (!KEYS.has(key))\n      throw new Error(`\"${key}\" is an invalid root level Interaction property.`)\n  }\n  return ix\n}\n\nconst recPipe = async (ix, fns = []) => {\n  try {\n    ix = hardMode(await ix)\n    if (isBad(ix)) throw new Error(`Interaction Error: ${ix.reason}`)\n    if (!fns.length) return ix\n    const [hd, ...rest] = fns\n    const cur = await hd\n    if (isFn(cur)) return recPipe(cur(ix), rest)\n    if (isNull(cur) || !cur) return recPipe(ix, rest)\n    if (isInteraction(cur)) return recPipe(cur, rest)\n    throw new Error(\"Invalid Interaction Composition\")\n  } catch (e) {\n    throw e\n  }\n}\n\nexport const pipe = (...args) => {\n  const [arg1, arg2] = args\n  if (isArray(arg1) && arg2 == null) return d => pipe(d, arg1)\n  return recPipe(arg1, arg2)\n}\n\nconst identity = v => v\n\nexport const get = (ix, key, fallback) => {\n  return ix.assigns[key] == null ? fallback : ix.assigns[key]\n}\n\nexport const put = (key, value) => ix => {\n  ix.assigns[key] = value\n  return Ok(ix)\n}\n\nexport const update = (key, fn = identity) => ix => {\n  ix.assigns[key] = fn(ix.assigns[key], ix)\n  return Ok(ix)\n}\n\nexport const destroy = key => ix => {\n  delete ix.assigns[key]\n  return Ok(ix)\n}\n","import {pipe, interaction} from \"../interaction/interaction.js\"\n\nexport function build(fns = []) {\n  return pipe(interaction(), fns)\n}\n","const DEFAULT_RESPONSE = `{\n    \"tag\":null,\n    \"transaction\":null,\n    \"transactionStatus\":null,\n    \"transactionId\":null,\n    \"encodedData\":null,\n    \"events\":null,\n    \"account\":null,\n    \"block\":null,\n    \"blockHeader\":null,\n    \"latestBlock\":null,\n    \"collection\":null\n}`\n\nexport const response = () => JSON.parse(DEFAULT_RESPONSE)\n","import {pipe, Ok, makeGetBlock} from \"../interaction/interaction.js\"\n\nexport function getBlock(isSealed = null) {\n  return pipe([\n    makeGetBlock,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, makeGetAccount, Ok} from \"../interaction/interaction.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\nexport function getAccount(addr) {\n  return pipe([\n    makeGetAccount,\n    ix => {\n      ix.account.addr = sansPrefix(addr)\n      return Ok(ix)\n    }\n  ])\n}\n","const latestBlockDeprecationNotice = () => {\n  console.error(\n    `\n          %c@onflow/decode Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the response object is deprecated and will no longer be recognized in future releases of @onflow/decode.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        `\n      .replace(/\\n\\s+/g, \"\\n\")\n      .trim(),\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst decodeNumber = async (num, _, stack) => {\n  try {\n    return Number(num)\n  } catch (e) {\n    throw new Error(`Decode Number Error : ${stack.join(\".\")}`)\n  }\n}\n\nconst decodeImplicit = async (i) => i\n\nconst decodeVoid = async () => null\n\nconst decodeType = async (type) => {\n  return type.staticType\n}\n\nconst decodePath = async (path) => {\n  return {\n    domain: path.domain,\n    identifier: path.identifier\n  }\n}\n\nconst decodeCapability = async (cap) => {\n  return {\n    path: cap.path,\n    address: cap.address,\n    borrowType: cap.borrowType\n  }\n}\n\nconst decodeOptional = async (optional, decoders, stack) =>\n  optional ? await recurseDecode(optional, decoders, stack) : null\n\nconst decodeReference = async (v) => ({address: v.address, type: v.type})\n\nconst decodeArray = async (array, decoders, stack) =>\n  await Promise.all(\n    array.map(\n      (v) =>\n        new Promise(async (res) =>\n          res(await recurseDecode(v, decoders, [...stack, v.type]))\n        )\n    )\n  )\n\nconst decodeDictionary = async (dictionary, decoders, stack) =>\n  await dictionary.reduce(async (acc, v) => {\n    acc = await acc\n    acc[\n      await recurseDecode(v.key, decoders, [...stack, v.key])\n    ] = await recurseDecode(v.value, decoders, [...stack, v.key])\n    return acc\n  }, Promise.resolve({}))\n\nconst decodeComposite = async (composite, decoders, stack) => {\n  const decoded = await composite.fields.reduce(async (acc, v) => {\n    acc = await acc\n    acc[v.name] = await recurseDecode(v.value, decoders, [...stack, v.name])\n    return acc\n  }, Promise.resolve({}))\n  const decoder = composite.id && decoderLookup(decoders, composite.id)\n  return decoder ? await decoder(decoded) : decoded\n}\n\nconst defaultDecoders = {\n  UInt: decodeImplicit,\n  Int: decodeImplicit,\n  UInt8: decodeImplicit,\n  Int8: decodeImplicit,\n  UInt16: decodeImplicit,\n  Int16: decodeImplicit,\n  UInt32: decodeImplicit,\n  Int32: decodeImplicit,\n  UInt64: decodeImplicit,\n  Int64: decodeImplicit,\n  UInt128: decodeImplicit,\n  Int128: decodeImplicit,\n  UInt256: decodeImplicit,\n  Int256: decodeImplicit,\n  Word8: decodeImplicit,\n  Word16: decodeImplicit,\n  Word32: decodeImplicit,\n  Word64: decodeImplicit,\n  UFix64: decodeImplicit,\n  Fix64: decodeImplicit,\n  String: decodeImplicit,\n  Character: decodeImplicit,\n  Bool: decodeImplicit,\n  Address: decodeImplicit,\n  Void: decodeVoid,\n  Optional: decodeOptional,\n  Reference: decodeReference,\n  Array: decodeArray,\n  Dictionary: decodeDictionary,\n  Event: decodeComposite,\n  Resource: decodeComposite,\n  Struct: decodeComposite,\n  Enum: decodeComposite,\n  Type: decodeType,\n  Path: decodePath,\n  Capability: decodeCapability,\n}\n\nconst decoderLookup = (decoders, lookup) => {\n  const found = Object.keys(decoders).find((decoder) => {\n    if (/^\\/.*\\/$/.test(decoder)) {\n      const reg = new RegExp(decoder.substring(1, decoder.length - 1))\n      return reg.test(lookup)\n    }\n    return decoder === lookup\n  })\n  return lookup && found && decoders[found]\n}\n\nconst recurseDecode = async (decodeInstructions, decoders, stack) => {\n  let decoder = decoderLookup(decoders, decodeInstructions.type)\n  if (!decoder)\n    throw new Error(\n      `Undefined Decoder Error: ${decodeInstructions.type}@${stack.join(\".\")}`\n    )\n  return await decoder(decodeInstructions.value, decoders, stack)\n}\n\nexport const decode = async (\n  decodeInstructions,\n  customDecoders = {},\n  stack = []\n) => {\n  let decoders = {...defaultDecoders, ...customDecoders}\n  return await recurseDecode(decodeInstructions, decoders, stack)\n}\n\nexport const decodeResponse = async (response, customDecoders = {}) => {\n  let decoders = {...defaultDecoders, ...customDecoders}\n\n  if (response.encodedData) {\n    return await decode(response.encodedData, decoders)\n  } else if (response.transactionStatus) {\n    return {\n      ...response.transactionStatus,\n      events: await Promise.all(\n        response.transactionStatus.events.map(async function decodeEvents(e) {\n          return {\n            type: e.type,\n            transactionId: e.transactionId,\n            transactionIndex: e.transactionIndex,\n            eventIndex: e.eventIndex,\n            data: await decode(e.payload, decoders),\n          }\n        })\n      ),\n    }\n  } else if (response.transaction) {\n    return response.transaction\n  } else if (response.events) {\n    return await Promise.all(\n      response.events.map(async function decodeEvents(e) {\n        return {\n          blockId: e.blockId,\n          blockHeight: e.blockHeight,\n          blockTimestamp: e.blockTimestamp,\n          type: e.type,\n          transactionId: e.transactionId,\n          transactionIndex: e.transactionIndex,\n          eventIndex: e.eventIndex,\n          data: await decode(e.payload, decoders),\n        }\n      })\n    )\n  } else if (response.account) {\n    return response.account\n  } else if (response.block) {\n    return response.block\n  } else if (response.blockHeader) {\n    return response.blockHeader\n  } else if (response.latestBlock) {\n    latestBlockDeprecationNotice()\n    return response.latestBlock\n  } else if (response.transactionId) {\n    return response.transactionId\n  } else if (response.collection) {\n    return response.collection\n  }\n\n  return null\n}\n","import {isTransaction, Ok, interaction, pipe} from \"../interaction/interaction.js\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {response} from \"../response/response.js\"\nimport {config} from \"@onflow/config\"\nimport {decodeResponse} from \"../decode/decode.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\nimport {send as defaultSend} from \"@onflow/transport-http\"\n\nasync function getRefId (opts) {\n  const node = await config().get(\"accessNode.api\")\n  const sendFn = await config.first(\n    [\"sdk.transport\", \"sdk.send\"],\n    defaultSend\n  )\n\n  invariant(\n    sendFn, \n    `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n  )\n\n  var ix\n  ix = await pipe(interaction(), [getBlock()])\n  ix = await sendFn(\n    ix,\n    {config, response, Buffer, ix: ixModule},\n    {node}\n  )\n  ix = await decodeResponse(ix)\n  return ix.id\n}\n\nexport function resolveRefBlockId(opts) {\n  return async ix => {\n    if (!isTransaction(ix)) return Ok(ix)\n    if (ix.message.refBlock) return Ok(ix)\n\n    ix.message.refBlock = await getRefId(opts)\n\n    return Ok(ix)\n  }\n}\n","import {isTransaction, isScript, get} from \"../interaction/interaction.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {config} from \"@onflow/config\"\n\nconst isFn = v => typeof v === \"function\"\nconst isString = v => typeof v === \"string\"\n\nexport async function resolveCadence(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    var cadence = get(ix, \"ix.cadence\")\n    invariant(\n      isFn(cadence) || isString(cadence),\n      \"Cadence needs to be a function or a string.\"\n    )\n    if (isFn(cadence)) cadence = await cadence({})\n    invariant(isString(cadence), \"Cadence needs to be a string at this point.\")\n    ix.message.cadence = await config()\n      .where(/^0x/)\n      .then(d =>\n        Object.entries(d).reduce(\n          (cadence, [key, value]) => {\n            const regex = new RegExp(\"(\\\\b\" + key + \"\\\\b)\", 'g')\n            return cadence.replace(regex, value)\n          },\n          cadence\n        )\n      )\n  }\n\n  return ix\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction, isScript} from \"../interaction/interaction.js\"\n\nconst isFn = v => typeof v === \"function\"\n\nfunction cast(arg) {\n  // prettier-ignore\n  invariant(typeof arg.xform != null, `No type specified for argument: ${arg.value}`)\n\n  if (isFn(arg.xform)) return arg.xform(arg.value)\n  if (isFn(arg.xform.asArgument)) return arg.xform.asArgument(arg.value)\n\n  // prettier-ignore\n  invariant(false, `Invalid Argument`, arg)\n}\n\nasync function handleArgResolution(arg, depth = 3) {\n  invariant(depth > 0, `Argument Resolve Recursion Limit Exceeded for Arg: ${arg.tempId}`)\n\n  if (isFn(arg.resolveArgument)) {\n    const resolvedArg = await arg.resolveArgument()\n    return handleArgResolution(resolvedArg, depth - 1)\n  } else {\n    return arg\n  }\n}\n\nexport async function resolveArguments(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    for (let [id, arg] of Object.entries(ix.arguments)) {\n      const res = await handleArgResolution(arg)\n      ix.arguments[id].asArgument = cast(res)\n    }\n  }\n\n  return ix\n}\n","import { SHA3 } from \"sha3\"\nimport { encode, Buffer } from \"@onflow/rlp\"\nimport { sansPrefix } from \"@onflow/util-address\"\n\nexport const encodeTransactionPayload = tx => prependTransactionDomainTag(rlpEncode(preparePayload(tx)))\nexport const encodeTransactionEnvelope = tx => prependTransactionDomainTag(rlpEncode(prepareEnvelope(tx)))\nexport const encodeTxIdFromVoucher = voucher => sha3_256(rlpEncode(prepareVoucher(voucher)))\n\nconst rightPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padEnd(pad * 2, 0), \"hex\")\n\nconst leftPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padStart(pad * 2, 0), \"hex\")\n\nconst TRANSACTION_DOMAIN_TAG = rightPaddedHexBuffer(Buffer.from(\"FLOW-V0.0-transaction\").toString(\"hex\"), 32).toString(\"hex\")\nconst prependTransactionDomainTag = tx => TRANSACTION_DOMAIN_TAG + tx\n\nconst addressBuffer = addr => leftPaddedHexBuffer(addr, 8)\n\nconst blockBuffer = block => leftPaddedHexBuffer(block, 32)\n\nconst argumentToString = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\n\nconst scriptBuffer = script => Buffer.from(script, \"utf8\")\nconst signatureBuffer = signature => Buffer.from(signature, \"hex\")\n\nconst rlpEncode = v => {\n  return encode(v).toString(\"hex\")\n}\n\nconst sha3_256 = msg => {\n  const sha = new SHA3(256)\n  sha.update(Buffer.from(msg, \"hex\"))\n  return sha.digest().toString(\"hex\")\n}\n\nconst preparePayload = tx => {\n  validatePayload(tx)\n\n  return [\n    scriptBuffer(tx.cadence),\n    tx.arguments.map(argumentToString),\n    blockBuffer(tx.refBlock),\n    tx.computeLimit,\n    addressBuffer(sansPrefix(tx.proposalKey.address)),\n    tx.proposalKey.keyId,\n    tx.proposalKey.sequenceNum,\n    addressBuffer(sansPrefix(tx.payer)),\n    tx.authorizers.map(authorizer => addressBuffer(sansPrefix(authorizer))),\n  ]\n}\n\nconst prepareEnvelope = tx => {\n  validateEnvelope(tx)\n\n  return [preparePayload(tx), preparePayloadSignatures(tx)]\n}\n\nconst preparePayloadSignatures = tx => {\n  const signers = collectSigners(tx)\n\n  return tx.payloadSigs\n    .map(sig => {\n      return {\n        signerIndex: signers.get(sig.address),\n        keyId: sig.keyId,\n        sig: sig.sig,\n      }\n    })\n    .sort((a, b) => {\n      if (a.signerIndex > b.signerIndex) return 1\n      if (a.signerIndex < b.signerIndex) return -1\n\n      if (a.keyId > b.keyId) return 1\n      if (a.keyId < b.keyId) return -1\n    })\n    .map(sig => {\n      return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)]\n    })\n}\n\nconst collectSigners = tx => {\n  const signers = new Map()\n  let i = 0\n\n  const addSigner = addr => {\n    if (!signers.has(addr)) {\n      signers.set(addr, i)\n      i++\n    }\n  }\n\n  addSigner(tx.proposalKey.address)\n  addSigner(tx.payer)\n  tx.authorizers.forEach(addSigner)\n\n  return signers\n}\n\nconst prepareVoucher = voucher => {\n  validateVoucher(voucher)\n\n  const signers = collectSigners(voucher)\n\n  const prepareSigs = sigs => {\n    return sigs.map(({ address, keyId, sig }) => {\n      return { signerIndex: signers.get(address), keyId, sig }\n    }).sort((a, b) => {\n      if (a.signerIndex > b.signerIndex) return 1\n      if (a.signerIndex < b.signerIndex) return -1\n      if (a.keyId > b.keyId) return 1\n      if (a.keyId < b.keyId) return -1\n    }).map(sig => {\n      return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)]\n    })\n  }\n\n  return [\n    [\n      scriptBuffer(voucher.cadence),\n      voucher.arguments.map(argumentToString),\n      blockBuffer(voucher.refBlock),\n      voucher.computeLimit,\n      addressBuffer(sansPrefix(voucher.proposalKey.address)),\n      voucher.proposalKey.keyId,\n      voucher.proposalKey.sequenceNum,\n      addressBuffer(sansPrefix(voucher.payer)),\n      voucher.authorizers.map(authorizer => addressBuffer(sansPrefix(authorizer))),\n    ],\n    prepareSigs(voucher.payloadSigs),\n    prepareSigs(voucher.envelopeSigs),\n  ]\n}\n\nconst validatePayload = tx => {\n  payloadFields.forEach(field => checkField(tx, field))\n  proposalKeyFields.forEach(field =>\n    checkField(tx.proposalKey, field, \"proposalKey\")\n  )\n}\n\nconst validateEnvelope = tx => {\n  payloadSigsFields.forEach(field => checkField(tx, field))\n  tx.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n}\n\nconst validateVoucher = voucher => {\n  payloadFields.forEach(field => checkField(voucher, field))\n  proposalKeyFields.forEach(field =>\n    checkField(voucher.proposalKey, field, \"proposalKey\")\n  )\n  payloadSigsFields.forEach(field => checkField(voucher, field))\n  voucher.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n  envelopeSigsFields.forEach(field => checkField(voucher, field))\n  voucher.envelopeSigs.forEach((sig, index) => {\n    envelopeSigFields.forEach(field =>\n      checkField(sig, field, \"envelopeSigs\", index)\n    )\n  })\n}\n\nconst isNumber = v => typeof v === \"number\"\nconst isString = v => typeof v === \"string\"\nconst isObject = v => v !== null && typeof v === \"object\"\nconst isArray = v => isObject(v) && v instanceof Array\n\nconst payloadFields = [\n  {name: \"cadence\", check: isString},\n  {name: \"arguments\", check: isArray},\n  {name: \"refBlock\", check: isString, defaultVal: \"0\"},\n  {name: \"computeLimit\", check: isNumber},\n  {name: \"proposalKey\", check: isObject},\n  {name: \"payer\", check: isString},\n  {name: \"authorizers\", check: isArray},\n]\n\nconst proposalKeyFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sequenceNum\", check: isNumber},\n]\n\nconst payloadSigsFields = [{name: \"payloadSigs\", check: isArray}]\n\nconst payloadSigFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst envelopeSigsFields = [{name: \"envelopeSigs\", check: isArray}]\n\nconst envelopeSigFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst checkField = (obj, field, base, index) => {\n  const {name, check, defaultVal} = field\n  if (obj[name] == null && defaultVal != null) obj[name] = defaultVal\n  if (obj[name] == null) throw missingFieldError(name, base, index)\n  if (!check(obj[name])) throw invalidFieldError(name, base, index)\n}\n\nconst printFieldName = (field, base, index) => {\n  if (!!base)\n    return index == null ? `${base}.${field}` : `${base}.${index}.${field}`\n  return field\n}\n\nconst missingFieldError = (field, base, index) =>\n  new Error(`Missing field ${printFieldName(field, base, index)}`)\nconst invalidFieldError = (field, base, index) =>\n  new Error(`Invalid field ${printFieldName(field, base, index)}`)\n","import {withPrefix} from \"@onflow/util-address\"\nimport {encodeTxIdFromVoucher} from \"../encode/encode.js\"\n\nexport function findInsideSigners(ix) {\n  // Inside Signers Are: (authorizers + proposer) - payer\n  let inside = new Set(ix.authorizations)\n  inside.add(ix.proposer)\n  if (Array.isArray(ix.payer)) {\n    ix.payer.forEach(p => inside.delete(p));\n  } else {\n    inside.delete(ix.payer)\n  }\n  return Array.from(inside)\n}\n\nexport function findOutsideSigners(ix) {\n  // Outside Signers Are: (payer)\n  let outside = new Set(Array.isArray(ix.payer) ? ix.payer : [ix.payer])\n  return Array.from(outside)\n}\n\nexport const createSignableVoucher = ix => {\n  const buildAuthorizers = () => {\n    const authorizations = ix.authorizations\n      .map(cid => withPrefix(ix.accounts[cid].addr))\n      .reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, [])\n    return authorizations[0] ? authorizations : []\n  }\n\n  const buildInsideSigners = () =>\n    findInsideSigners(ix).map(id => ({\n      address: withPrefix(ix.accounts[id].addr),\n      keyId: ix.accounts[id].keyId,\n      sig: ix.accounts[id].signature,\n    }))\n\n    const buildOutsideSigners = () =>\n    findOutsideSigners(ix).map(id => ({\n      address: withPrefix(ix.accounts[id].addr),\n      keyId: ix.accounts[id].keyId,\n      sig: ix.accounts[id].signature,\n    }))\n\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: withPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n    },\n    payer: withPrefix(ix.accounts[Array.isArray(ix.payer) ? ix.payer[0] : ix.payer].addr),\n    authorizers: buildAuthorizers(),\n    payloadSigs: buildInsideSigners(),\n    envelopeSigs: buildOutsideSigners(),\n  }\n}\n\nexport const voucherToTxId = voucher => {\n  return encodeTxIdFromVoucher(voucher)\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction} from \"../interaction/interaction.js\"\nimport {createSignableVoucher} from \"./voucher.js\"\n\nconst isFn = v => typeof v === \"function\"\nexport function buildPreSignable(acct, ix) {\n  try {\n    return {\n      f_type: \"PreSignable\",\n      f_vsn: \"1.0.1\",\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildPreSignable\", error)\n    throw error\n  }\n}\n\nasync function collectAccounts(ix, accounts, last, depth = 3) {\n  invariant(depth, \"Account Resolve Recursion Limit Exceeded\", {ix, accounts})\n\n  let authorizations = []\n  for (let ax of accounts) {\n    var old = last || ax\n    if (isFn(ax.resolve)) ax = await ax.resolve(ax, buildPreSignable(ax, ix))\n\n    if (Array.isArray(ax)) {\n      await collectAccounts(ix, ax, old, depth - 1)\n    } else {\n      if (ax.addr != null && ax.keyId != null) {\n        ax.tempId = `${ax.addr}-${ax.keyId}`\n      }\n      ix.accounts[ax.tempId] = ix.accounts[ax.tempId] || ax\n      ix.accounts[ax.tempId].role.proposer =\n        ix.accounts[ax.tempId].role.proposer || ax.role.proposer\n      ix.accounts[ax.tempId].role.payer =\n        ix.accounts[ax.tempId].role.payer || ax.role.payer\n      ix.accounts[ax.tempId].role.authorizer =\n        ix.accounts[ax.tempId].role.authorizer || ax.role.authorizer\n\n      if (ix.accounts[ax.tempId].role.proposer && ix.proposer === old.tempId) {\n        ix.proposer = ax.tempId\n      }\n\n      if (ix.accounts[ax.tempId].role.payer) {\n        if (Array.isArray(ix.payer)) {\n          ix.payer = Array.from(new Set([...ix.payer, ax.tempId].map(d =>\n            d === old.tempId ? ax.tempId : d\n          )))\n        } else {\n          ix.payer = Array.from(new Set([ix.payer, ax.tempId].map(d =>\n            d === old.tempId ? ax.tempId : d\n          )))\n        }\n        if (ix.payer.length > 1) {\n          // remove payer dups based on addr and keyId\n          const dupList = []\n          const payerAccts = []\n          ix.payer = ix.payer.reduce((g, tempId) => {\n            const { addr, keyId } = ix.accounts[tempId];\n            const key = `${addr}-${keyId}`;\n            payerAccts.push(addr)\n            if (dupList.includes(key)) return g;\n            dupList.push(key)\n            return [...g, tempId]\n          }, [])\n          const multiAccts = Array.from(new Set(payerAccts))\n          if (multiAccts.length > 1) {\n            throw new Error(\n              \"Payer can not be different accounts\"\n            )\n          }\n        }\n      }\n\n      if (ix.accounts[ax.tempId].role.authorizer) {\n        if (last) {\n          // do group replacement\n          authorizations = Array.from(new Set([...authorizations, ax.tempId]))\n        } else {\n          // do 1-1 replacement\n          ix.authorizations = ix.authorizations.map(d =>\n            d === old.tempId ? ax.tempId : d\n          )\n        }\n      }\n    }\n    if (old.tempId != ax.tempId) delete ix.accounts[old.tempId]\n  }\n\n  if (last) {\n    // complete (flatmap) group replacement\n    ix.authorizations = ix.authorizations\n      .map(d => (d === last.tempId ? authorizations : d))\n      .reduce(\n        (prev, curr) =>\n          Array.isArray(curr) ? [...prev, ...curr] : [...prev, curr],\n        []\n      )\n  }\n}\n\nexport async function resolveAccounts(ix) {\n  if (isTransaction(ix)) {\n    if (!Array.isArray(ix.payer)) {\n      console.warn(\n        `\n        %cFCL Warning\n        ============================\n        \"ix.payer\" must be an array. Support for ix.payer as a singular is deprecated,\n        see changelog for more info.\n        ============================\n        `,\n        \"font-weight:bold;font-family:monospace;\"\n      )\n    }\n    try {\n      await collectAccounts(ix, Object.values(ix.accounts))\n      await collectAccounts(ix, Object.values(ix.accounts))\n    } catch (error) {\n      console.error(\"=== SAD PANDA ===\\n\\n\", error, \"\\n\\n=== SAD PANDA ===\")\n      throw error\n    }\n  }\n  return ix\n}\n","import {isTransaction} from \"../interaction/interaction.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {\n  encodeTransactionPayload as encodeInsideMessage,\n  encodeTransactionEnvelope as encodeOutsideMessage,\n} from \"../encode/encode.js\"\nimport {\n  createSignableVoucher,\n  findInsideSigners,\n  findOutsideSigners,\n} from \"./voucher.js\"\n\nexport async function resolveSignatures(ix) {\n  if (isTransaction(ix)) {\n    try {\n      let insideSigners = findInsideSigners(ix)\n      const insidePayload = encodeInsideMessage(prepForEncoding(ix))\n      await Promise.all(insideSigners.map(fetchSignature(ix, insidePayload)))\n\n      let outsideSigners = findOutsideSigners(ix)\n      const outsidePayload = encodeOutsideMessage({\n        ...prepForEncoding(ix),\n        payloadSigs: insideSigners.map(id => ({\n          address: ix.accounts[id].addr,\n          keyId: ix.accounts[id].keyId,\n          sig: ix.accounts[id].signature,\n        })),\n      })\n      await Promise.all(outsideSigners.map(fetchSignature(ix, outsidePayload)))\n    } catch (error) {\n      console.error(\"Signatures\", error, {ix})\n      throw error\n    }\n  }\n  return ix\n}\n\nfunction fetchSignature(ix, payload) {\n  return async function innerFetchSignature(id) {\n    const acct = ix.accounts[id]\n    if (acct.signature != null) return\n    const {signature} = await acct.signingFunction(\n      buildSignable(acct, payload, ix)\n    )\n    ix.accounts[id].signature = signature\n  }\n}\n\nexport function buildSignable(acct, message, ix) {\n  try {\n    return {\n      f_type: \"Signable\",\n      f_vsn: \"1.0.1\",\n      message,\n      addr: sansPrefix(acct.addr),\n      keyId: acct.keyId,\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildSignable\", error)\n    throw error\n  }\n}\n\nfunction prepForEncoding(ix) {\n  const payerAddress = sansPrefix((Array.isArray(ix.payer) \n  ? ix.accounts[ix.payer[0]]\n  : ix.accounts[ix.payer]).addr);\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: sansPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n    },\n    payer: payerAddress,\n    authorizers: ix.authorizations\n      .map(cid => sansPrefix(ix.accounts[cid].addr))\n      .reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, []),\n  }\n}\n","import { get, pipe, Ok, Bad } from \"../interaction/interaction.js\"\n\nexport async function resolveValidators(ix) {\n  const validators = get(ix, 'ix.validators', [])\n  return pipe(ix, validators.map(cb => ix => cb(ix, { Ok, Bad })))\n}   \n","import {sansPrefix} from \"@onflow/util-address\"\n\nexport async function resolveFinalNormalization(ix) {\n  for (let key of Object.keys(ix.accounts)) {\n    ix.accounts[key].addr = sansPrefix(ix.accounts[key].addr)\n  }\n  return ix\n}\n","import {get, isFn} from \"../interaction/interaction.js\"\nimport {createSignableVoucher} from \"./voucher.js\"\n\nexport async function resolveVoucherIntercept(ix) {\n  const fn = get(ix, \"ix.voucher-intercept\")\n  if (isFn(fn)) {\n    await fn(createSignableVoucher(ix))\n  }\n  return ix\n}\n","import {pipe, isTransaction} from \"../interaction/interaction.js\"\nimport {config} from \"@onflow/config\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\nimport {send as defaultSend} from \"@onflow/transport-http\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {response} from \"../response/response.js\"\nimport {build} from \"../build/build.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\n\nimport {resolveRefBlockId} from \"./resolve-ref-block-id.js\"\nimport {resolveCadence} from \"./resolve-cadence.js\"\nimport {resolveArguments} from \"./resolve-arguments.js\"\nimport {resolveAccounts} from \"./resolve-accounts.js\"\nimport {resolveSignatures} from \"./resolve-signatures.js\"\nimport {resolveValidators} from \"./resolve-validators.js\"\nimport {resolveFinalNormalization} from \"./resolve-final-normalization.js\"\nimport {resolveVoucherIntercept} from \"./resolve-voucher-intercept.js\"\n\nconst noop = v => v\nconst debug =\n  (key, fn = noop) =>\n  async ix => {\n    const take = (obj, keys = []) => {\n      if (typeof keys === \"string\") keys = keys.split(\" \")\n      keys.reduce((acc, key) => ({...acc, [key]: obj[key]}), {})\n    }\n\n    const accts = ix =>\n      [\n        \"\\nAccounts:\",\n        {\n          proposer: ix.proposer,\n          authorizations: ix.authorizations,\n          payer: ix.payer,\n        },\n        \"\\n\\nDetails:\",\n        ix.accounts,\n      ].filter(Boolean)\n\n    const log = (...msg) => {\n      console.log(`debug[${key}] ---\\n`, ...msg, \"\\n\\n\\n---\")\n    }\n\n    if (await config.get(`debug.${key}`)) await fn(ix, log, accts)\n    return ix\n  }\n\nexport const resolve = pipe([\n  resolveCadence,\n  debug(\"cadence\", (ix, log) => log(ix.message.cadence)),\n  resolveArguments,\n  debug(\"arguments\", (ix, log) => log(ix.message.arguments, ix.message)),\n  resolveAccounts,\n  debug(\"accounts\", (ix, log, accts) => log(...accts(ix))),\n  /* special */ execFetchRef,\n  /* special */ execFetchSequenceNumber,\n  resolveSignatures,\n  debug(\"signatures\", (ix, log, accts) => log(...accts(ix))),\n  resolveFinalNormalization,\n  resolveValidators,\n  resolveVoucherIntercept,\n  debug(\"resolved\", (ix, log) => log(ix)),\n])\n\nasync function execFetchRef(ix) {\n  if (isTransaction(ix) && ix.message.refBlock == null) {\n    const node = await config().get(\"accessNode.api\")\n    const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], defaultSend)\n\n    invariant(\n      sendFn,\n      `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n    )\n\n    ix.message.refBlock = (\n      await sendFn(\n        build([getBlock()]),\n        {config, response, Buffer, ix: ixModule},\n        {node}\n      ).then(decode)\n    ).id\n  }\n  return ix\n}\n\nasync function execFetchSequenceNumber(ix) {\n  if (isTransaction(ix)) {\n    var acct = Object.values(ix.accounts).find(a => a.role.proposer)\n    invariant(acct, `Transactions require a proposer`)\n    if (acct.sequenceNum == null) {\n      const node = await config().get(\"accessNode.api\")\n      const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], defaultSend)\n\n      invariant(\n        sendFn,\n        `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n      )\n\n      ix.accounts[acct.tempId].sequenceNum = await sendFn(\n        await build([getAccount(acct.addr)]),\n        {config, response, Buffer, ix: ixModule},\n        {node}\n      )\n        .then(decode)\n        .then(acct => acct.keys)\n        .then(keys => keys.find(key => key.index === acct.keyId))\n        .then(key => key.sequenceNumber)\n    }\n  }\n  return ix\n}\n","import { Ok, Bad } from \"../interaction/interaction.js\"\n\nexport function invariant(...args) {\n  if (args.length > 1) {\n    const [predicate, message] = args\n    return invariant((ix, { Ok, Bad }) => {\n      return predicate ? Ok(ix) : Bad(ix, message)\n    })\n  }\n  const [fn] = args\n  return ix => fn(ix, {Ok, Bad})\n}\n","import {Buffer} from \"@onflow/rlp\"\nimport {send as defaultSend} from \"@onflow/transport-http\"\nimport {interaction, pipe} from \"../interaction/interaction.js\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {invariant} from \"../build/build-invariant.js\"\nimport {response} from \"../response/response.js\"\nimport {config} from \"@onflow/config\"\nimport {resolve as defaultResolve} from \"../resolve/resolve.js\"\n\nexport const send = async (args = [], opts = {}) => {\n  const sendFn = await config.first(\n    [\"sdk.transport\", \"sdk.send\"],\n    opts.send || defaultSend\n  )\n\n  invariant(\n    sendFn, \n    `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n  )\n\n  const resolveFn = await config.first(\n    [\"sdk.resolve\"],\n    opts.resolve || defaultResolve\n  )\n\n  opts.node = opts.node || (await config().get(\"accessNode.api\"))\n\n  if (Array.isArray(args)) args = pipe(interaction(), args)\n  return sendFn(await resolveFn(args), {config, response, ix: ixModule, Buffer}, opts)\n}\n","import {decodeResponse} from \"./decode.js\"\nimport {config} from \"@onflow/config\"\n\nexport async function decode(response) {\n  const decodersFromConfig = await config().where(/^decoder\\./)\n  const decoders = Object.entries(decodersFromConfig).map(\n    ([pattern, xform]) => {\n      pattern = `/${pattern.replace(/^decoder\\./, \"\")}$/`\n      return [pattern, xform]\n    }\n  )\n\n  return decodeResponse(response, Object.fromEntries(decoders))\n}\n","import {withPrefix, sansPrefix} from \"@onflow/util-address\"\nimport {\n    encodeTransactionPayload,\n    encodeTransactionEnvelope,\n} from \"../encode/encode.js\"\n\nconst findPayloadSigners = (voucher) => {\n    // Payload Signers Are: (authorizers + proposer) - payer\n    let payload = new Set(voucher.authorizers)\n    payload.add(voucher.proposalKey.address)\n    payload.delete(voucher.payer)\n    return Array.from(payload).map(withPrefix)\n}\n\nconst findEnvelopeSigners = (voucher) => {\n    // Envelope Signers Are: (payer)\n    let envelope = new Set([voucher.payer])\n    return Array.from(envelope).map(withPrefix)\n}\n\nexport class UnableToDetermineMessageEncodingTypeForSignerAddress extends Error {\n    constructor(signerAddress) {\n      const msg = `\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: ${signerAddress}. \n        Please ensure the address: ${signerAddress} is intended to sign the given transaction as specified by the transaction signable.\n      `.trim()\n      super(msg)\n      this.name = \"Unable To Determine Message Encoding For Signer Addresss\"\n    }\n}\n\nexport const encodeMessageFromSignable = (signable, signerAddress) => {\n    let payloadSigners = findPayloadSigners(signable.voucher)\n    let envelopeSigners = findEnvelopeSigners(signable.voucher)\n\n    const isPayloadSigner = payloadSigners.includes(withPrefix(signerAddress))\n    const isEnvelopeSigner = envelopeSigners.includes(withPrefix(signerAddress))\n\n    if (!isPayloadSigner && !isEnvelopeSigner) {\n        throw new UnableToDetermineMessageEncodingTypeForSignerAddress(signerAddress)\n    }\n\n    const message = {\n        cadence: signable.voucher.cadence,\n        refBlock: signable.voucher.refBlock,\n        computeLimit: signable.voucher.computeLimit,\n        arguments: signable.voucher.arguments,\n        proposalKey: {\n            ...signable.voucher.proposalKey,\n            address: sansPrefix(signable.voucher.proposalKey.address)\n        },\n        payer: sansPrefix(signable.voucher.payer),\n        authorizers: signable.voucher.authorizers.map(sansPrefix),\n        payloadSigs: signable.voucher.payloadSigs.map(ps => ({\n            ...ps,\n            address: sansPrefix(ps.address)\n        }))\n    }\n\n    return isPayloadSigner ? encodeTransactionPayload(message) : encodeTransactionEnvelope(message)\n}\n\n","import {update} from \"../interaction/interaction.js\"\n\nexport function validator(cb) {\n    return update('ix.validators', validators => \n        Array.isArray(validators) ? validators.push(cb) : [cb]\n    )\n}\n","import {pipe} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\nexport function atBlockHeight(height) {\n  return pipe([\n    ix => {\n      ix.block.height = height\n      return ix\n    },\n    validator(ix => {\n      if (typeof ix.block.isSealed === \"boolean\")\n        throw new Error(\"Unable to specify both block height and isSealed.\")\n      if (ix.block.id)\n        throw new Error(\"Unable to specify both block height and block id.\")\n      return ix\n    }),\n  ])\n}\n","import {isGetAccount, pipe, Ok} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\nexport function atBlockId(id) {\n  return pipe([\n    ix => {\n      ix.block.id = id\n      return Ok(ix)\n    },\n    validator((ix, {Ok, Bad}) => {\n      if (isGetAccount(ix)) return Bad(ix, \"Unable to specify a block id with a Get Account interaction.\")\n      if (typeof ix.block.isSealed === \"boolean\") return Bad(ix, \"Unable to specify both block id and isSealed.\")\n      if (ix.block.height) return Bad(ix, \"Unable to specify both block id and block height.\")\n      return Ok(ix)\n    }),\n  ])\n}\n","import {atBlockHeight} from \"../build/build-at-block-height.js\"\nimport {atBlockId} from \"../build/build-at-block-id.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\nimport {send} from \"../send/send.js\"\n\nexport function account(address, {height, id} = {}, opts) {\n  invariant(\n    !(id && height),\n    `Method: account -- Cannot pass \"id\" and \"height\" simultaneously`\n  )\n\n  // Get account by ID\n  if (id) return send([getAccount(address), atBlockId(id)], opts).then(decode)\n\n  // Get account by height\n  if (height) return send([getAccount(address), atBlockHeight(height)], opts).then(decode)\n\n  return send([getAccount(address)], opts).then(decode)\n}\n","import {send} from \"../send/send.js\"\nimport {getBlock} from \"../build/build-get-block\"\nimport {atBlockHeight} from \"../build/build-at-block-height.js\"\nimport {atBlockId} from \"../build/build-at-block-id.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\nimport {invariant} from \"@onflow/util-invariant\"\n\nexport function block({sealed = false, id, height} = {}, opts = {}) {\n  invariant(\n    !((sealed && id) || (sealed && height)),\n    `Method: block -- Cannot pass \"sealed\" with \"id\" or \"height\"`\n  )\n\n  invariant(\n    !(id && height),\n    `Method: block -- Cannot pass \"id\" and \"height\" simultaneously`\n  )\n\n  // Get block by ID\n  if (id) return send([getBlock(), atBlockId(id)], opts).then(decode)\n\n  // Get block by height\n  if (height) return send([getBlock(), atBlockHeight(height)], opts).then(decode)\n\n  // Get latest block\n  return send([getBlock(sealed)], opts).then(decode)\n}\n","import {pipe, prepAccount, AUTHORIZER} from \"../interaction/interaction.js\"\n\nexport function authorizations(ax = []) {\n  return pipe(\n    ax.map(authz => {\n      return prepAccount(authz, {role: AUTHORIZER})\n    })\n  )\n}\n\nexport function authorization(addr, signingFunction, keyId, sequenceNum) {\n  return {addr, signingFunction, keyId, sequenceNum}\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEvents(eventType, start, end) {\n\n  if (typeof start !== \"undefined\" || typeof end !== \"undefined\") {\n    console.warn(\n      `\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing a start and end into getEnvents has been deprecated and will not be supported in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\n  \n      ============================\n    `,\n      \"font-weight:bold;font-family:monospace;\"\n    )  \n  }\n\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEventsAtBlockHeightRange(eventType, start, end) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEventsAtBlockIds(eventType, blockIds = []) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.blockIds = blockIds\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetBlockHeader} from \"../interaction/interaction.js\"\n\nexport function getBlockHeader(isSealed = null) {\n  return pipe([\n    makeGetBlockHeader,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, makeGetCollection} from \"../interaction/interaction.js\"\n\nexport function getCollection(id = null) {\n  return pipe([\n    makeGetCollection,\n    ix => {\n      ix.collection.id = id\n      return ix\n    }\n  ])\n}\n","import {pipe, Ok, makeGetTransactionStatus} from \"../interaction/interaction.js\"\n\nexport function getTransactionStatus(transactionId) {\n  return pipe([\n    makeGetTransactionStatus,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetTransaction} from \"../interaction/interaction.js\"\n\nexport function getTransaction(transactionId) {\n  return pipe([\n    makeGetTransaction,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    }\n  ])\n}\n","export function limit(computeLimit) {\n  return ix => {\n    ix.message.computeLimit = computeLimit\n    return ix\n  }\n}\n","import {pipe, makeArgument} from \"../interaction/interaction.js\"\n\nexport function args(ax = []) {\n  return pipe(ax.map(makeArgument))\n}\n\nexport function arg(value, xform) {\n  return {value, xform}\n}\n","import {prepAccount, PROPOSER} from \"../interaction/interaction.js\"\n\nexport async function proposer(authz) {\n  return prepAccount(authz, {role: PROPOSER})\n}\n","import {prepAccount, PAYER} from \"../interaction/interaction.js\"\n\nexport async function payer(authz) {\n  return prepAccount(authz, {role: PAYER})\n}\n","import {makePing} from \"../interaction/interaction.js\"\n\nexport function ping() {\n  return makePing\n}\n","import {pipe, Ok} from \"../interaction/interaction.js\"\n\nexport function ref(refBlock) {\n  return pipe([\n    ix => {\n      ix.message.refBlock = refBlock\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, put, makeScript} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nexport function script(...args) {\n  return pipe([\n    makeScript,\n    put(\"ix.cadence\", template(...args))\n  ])\n}\n","import {pipe, put, Ok, makeTransaction} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nconst DEFAULT_COMPUTE_LIMIT = 10\nconst DEFAULT_SCRIPT_ACCOUNTS = []\nconst DEFUALT_REF = null\n\nexport function transaction(...args) {\n  return pipe([\n    makeTransaction,\n    put(\"ix.cadence\", template(...args)),\n    ix => {\n      ix.message.computeLimit = ix.message.computeLimit || DEFAULT_COMPUTE_LIMIT\n      ix.message.refBlock = ix.message.refBlock || DEFUALT_REF\n      ix.authorizations = ix.authorizations || DEFAULT_SCRIPT_ACCOUNTS\n      return Ok(ix)\n    },\n  ])\n}\n","import {put} from \"../interaction/interaction.js\"\n\nexport function voucherIntercept(fn) {\n  return put(\"ix.voucher-intercept\", fn)\n}\n","import {isTransaction, Ok} from \"../interaction/interaction.js\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {response as responseModule} from \"../response/response.js\"\nimport {config} from \"@onflow/config\"\nimport {decodeResponse} from \"../decode/decode.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {build} from \"../build/build.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\nimport {send as defaultSend} from \"@onflow/transport-http\"\n\nexport const resolveProposerSequenceNumber = ({ node }) => async (ix) => {\n  if (!(isTransaction(ix))) return Ok(ix)\n  if (ix.accounts[ix.proposer].sequenceNum) return Ok(ix)\n\n  const sendFn = await config.first(\n    [\"sdk.transport\", \"sdk.send\"],\n    defaultSend\n  )\n\n  invariant(\n    sendFn, \n    `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n  )\n\n  const response = await sendFn(\n    await build([\n      getAccount(ix.accounts[ix.proposer].addr)\n    ]),\n    {config, response: responseModule, Buffer, ix: ixModule},\n    {node}\n  )\n  const decoded = await decodeResponse(response)\n\n  ix.accounts[ix.proposer].sequenceNum = decoded.keys[ix.accounts[ix.proposer].keyId].sequenceNumber\n\n  return Ok(ix)\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isGetAccount, isGetBlock} from \"../interaction/interaction\"\n\nexport function mockAccountResponse(ix, numberOfKeys = 5) {\n  // prettier-ignore\n  invariant(ix.account, \"mockAccountResponse(ix) -- ix.account is missing\", ix)\n  // prettier-ignore\n  invariant( ix.account.addr, \"mockAccountResponse(ix) -- ix.account.addr is missing\", ix)\n\n  const address = ix.account.addr\n\n  return {\n    account: {\n      addr: address,\n      keys: Array.from({length: numberOfKeys}, (_, i) => ({\n        index: i,\n        sequenceNumber: 42,\n      })),\n    },\n  }\n}\n\nexport function mockGetBlockResponse(ix) {\n  return {\n    tag: \"GET_BLOCK\",\n    block: {\n      id: \"32\",\n    },\n  }\n}\n\nconst identity = v => v\n\nexport function mockSend(fallback = identity) {\n  return async function execSend(ix) {\n    ix = await ix\n    switch (true) {\n      case isGetAccount(ix):\n        return mockAccountResponse(ix)\n\n      case isGetBlock(ix):\n        return mockGetBlockResponse(ix)\n\n      default:\n        return fallback(ix)\n    }\n  }\n}\n","export const idof = acct => `${acct.addr}-${acct.keyId}`\n\nexport function sig(opts) {\n  return [\"SIGNATURE\", opts.addr, opts.keyId].join(\".\")\n}\n\nexport function authzFn(opts = {}) {\n  return function (account) {\n    const acct = {\n      ...account,\n      ...opts,\n      signingFunction:\n        opts.signingFunction ||\n        account.signingFunction ||\n        fallbackSigningFunction,\n    }\n\n    return acct\n\n    function fallbackSigningFunction(signable) {\n      return {\n        addr: acct.addr,\n        keyId: acct.keyId,\n        signature: sig(acct),\n      }\n    }\n  }\n}\n\nexport function authzResolve(opts = {}) {\n  return function (account) {\n    const {tempId, ...rest} = opts\n    return {\n      ...account,\n      tempId: tempId || \"WITH_RESOLVE\",\n      resolve: authzFn(rest),\n    }\n  }\n}\n\nconst ROLE = {proposer: false, authorizer: false, payer: false}\nconst noop = () => {}\n\nexport function authzResolveMany(opts = {}) {\n  return function (account) {\n    const tempId = opts.tempId || \"AUTHZ_RESOLVE_MANY\"\n    return {\n      ...account,\n      tempId,\n      resolve: () =>\n        [\n          opts.proposer &&\n            authzFn(opts.proposer)({role: {...ROLE, proposer: true}}),\n          ...opts.authorizations\n            .map(authzFn)\n            .map(d => d({role: {...ROLE, authorizer: true}})),\n          opts.payer && authzFn(opts.payer)({role: {...ROLE, payer: true}}),\n        ].filter(Boolean),\n    }\n  }\n}\n","import {build} from \"../build/build\"\nimport {resolve} from \"../resolve/resolve\"\nimport {ref} from \"../build/build-ref\"\n\nexport const run = (fns = []) => build([ref(\"123\"), ...fns]).then(resolve)\n","export const VERSION = MICROBUNDLE_CURRENT_VERSION || \"TESTVERSION\"\n","import {deprecate} from \"./utils\"\n// Base\nexport {build} from \"./build/build.js\"\nexport {resolve} from \"./resolve/resolve.js\"\nexport {send} from \"./send/send.js\"\nexport {decode} from \"./decode/sdk-decode.js\"\nexport {\n  encodeTransactionPayload,\n  encodeTransactionEnvelope,\n  encodeTxIdFromVoucher,\n} from \"./encode/encode\"\n// Utils\nexport {\n  interaction,\n  isOk,\n  isBad,\n  why,\n  pipe,\n  get,\n  put,\n  update,\n  destroy,\n  isUnknown,\n  isScript,\n  isTransaction,\n  isGetTransaction,\n  isGetTransactionStatus,\n  isGetAccount,\n  isGetEvents,\n  isPing,\n  isGetBlock,\n  isGetBlockHeader,\n  isGetCollection,\n} from \"./interaction/interaction.js\"\nexport {createSignableVoucher, voucherToTxId} from \"./resolve/voucher.js\"\nexport {encodeMessageFromSignable} from \"./wallet-utils/encode-signable.js\"\nexport {template as cadence} from \"@onflow/util-template\"\nexport {template as cdc} from \"@onflow/util-template\"\n\n// Helpers\nexport {account} from \"./account/account.js\"\nexport {block} from \"./block/block.js\"\n\n// Builders\nexport {authorizations, authorization} from \"./build/build-authorizations.js\"\nexport {atBlockHeight} from \"./build/build-at-block-height.js\"\nexport {atBlockId} from \"./build/build-at-block-id.js\"\nexport {getAccount} from \"./build/build-get-account.js\"\nexport {getEvents} from \"./build/build-get-events.js\"\nexport {getEventsAtBlockHeightRange} from \"./build/build-get-events-at-block-height-range.js\"\nexport {getEventsAtBlockIds} from \"./build/build-get-events-at-block-ids\"\nexport {getBlock} from \"./build/build-get-block.js\"\nexport {getBlockHeader} from \"./build/build-get-block-header.js\"\nexport {getCollection} from \"./build/build-get-collection\"\nexport {getTransactionStatus} from \"./build/build-get-transaction-status.js\"\nexport {getTransaction} from \"./build/build-get-transaction.js\"\nexport {limit} from \"./build/build-limit.js\"\nexport {args, arg} from \"./build/build-arguments.js\"\nexport {proposer} from \"./build/build-proposer.js\"\nexport {payer} from \"./build/build-payer.js\"\nexport {ping} from \"./build/build-ping.js\"\nexport {ref} from \"./build/build-ref.js\"\nexport {script} from \"./build/build-script.js\"\nexport {transaction} from \"./build/build-transaction.js\"\nexport {validator} from \"./build/build-validator.js\"\nexport {invariant} from \"./build/build-invariant.js\"\nexport {voucherIntercept} from \"./build/build-voucher-intercept.js\"\n\n// Resolvers\nexport {resolveCadence} from \"./resolve/resolve-cadence.js\"\nexport {resolveFinalNormalization} from \"./resolve/resolve-final-normalization\"\nexport {resolveProposerSequenceNumber} from \"./resolve/resolve-proposer-sequence-number\"\nexport {resolveArguments} from \"./resolve/resolve-arguments.js\"\nexport {resolveAccounts} from \"./resolve/resolve-accounts.js\"\nexport {resolveSignatures} from \"./resolve/resolve-signatures.js\"\nexport {resolveValidators} from \"./resolve/resolve-validators.js\"\nexport {resolveRefBlockId} from \"./resolve/resolve-ref-block-id.js\"\nexport {resolveVoucherIntercept} from \"./resolve/resolve-voucher-intercept.js\"\n\nexport {config} from \"@onflow/config\"\n\n// Deprecated\nexport const params = params =>\n  deprecate.error({\n    name: \"params\",\n    transitionsPath:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n  })\nexport const param = params =>\n  deprecate.warn({\n    name: \"param\",\n    transitionsPath:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n  })\n\nimport * as TestUtils from \"./test-utils\"\nexport {TestUtils}\n\nexport {VERSION} from \"./VERSION\"\n"],"names":["buildWarningMessage","name","transitionsPath","console","warn","buildErrorMessage","error","deprecated","deprecate","UNKNOWN","SCRIPT","TRANSACTION","GET_TRANSACTION_STATUS","GET_ACCOUNT","GET_EVENTS","PING","GET_TRANSACTION","GET_BLOCK","GET_BLOCK_HEADER","GET_COLLECTION","BAD","OK","ACCOUNT","PARAM","ARGUMENT","AUTHORIZER","PAYER","PROPOSER","ACCT","ARG","IX","KEYS","Set","Object","keys","JSON","parse","interaction","CHARS","split","randChar","Math","random","length","uuid","Array","from","join","isNumber","d","isArray","isObj","isNull","isFn","isInteraction","ix","key","hasOwnProperty","Ok","status","Bad","reason","makeIx","wat","tag","prepAccount","acct","opts","invariant","role","tempId","authorization","resolve","accounts","authorizations","push","payer","makeArgument","arg","message","arguments","value","asArgument","xform","resolveArgument","bind","makeUnknown","makeScript","makeTransaction","makeGetTransactionStatus","makeGetTransaction","makeGetAccount","makeGetEvents","makePing","makeGetBlock","makeGetBlockHeader","makeGetCollection","is","isUnknown","isScript","isTransaction","isGetTransactionStatus","isGetTransaction","isGetAccount","isGetEvents","isPing","isGetBlock","isGetBlockHeader","isGetCollection","isOk","isBad","why","isAccount","account","kind","isParam","param","isArgument","argument","hardMode","has","Error","recPipe","fns","hd","rest","cur","e","pipe","args","arg1","arg2","identity","v","get","fallback","assigns","put","update","fn","destroy","build","DEFAULT_RESPONSE","response","getBlock","isSealed","block","getAccount","addr","sansPrefix","latestBlockDeprecationNotice","replace","trim","decodeImplicit","i","decodeVoid","decodeType","type","staticType","decodePath","path","domain","identifier","decodeCapability","cap","address","borrowType","decodeOptional","optional","decoders","stack","recurseDecode","decodeReference","decodeArray","array","Promise","all","map","res","decodeDictionary","dictionary","reduce","acc","decodeComposite","composite","decoded","fields","decoder","id","decoderLookup","defaultDecoders","UInt","Int","UInt8","Int8","UInt16","Int16","UInt32","Int32","UInt64","Int64","UInt128","Int128","UInt256","Int256","Word8","Word16","Word32","Word64","UFix64","Fix64","String","Character","Bool","Address","Void","Optional","Reference","Dictionary","Event","Resource","Struct","Enum","Type","Path","Capability","lookup","found","find","test","reg","RegExp","substring","decodeInstructions","decode","customDecoders","decodeResponse","encodedData","transactionStatus","events","decodeEvents","transactionId","transactionIndex","eventIndex","data","payload","transaction","blockId","blockHeight","blockTimestamp","blockHeader","latestBlock","collection","getRefId","node","config","sendFn","first","defaultSend","Buffer","ixModule","resolveRefBlockId","refBlock","isString","resolveCadence","cadence","where","then","entries","regex","cast","handleArgResolution","depth","resolvedArg","resolveArguments","encodeTransactionPayload","tx","prependTransactionDomainTag","rlpEncode","preparePayload","encodeTransactionEnvelope","prepareEnvelope","encodeTxIdFromVoucher","voucher","sha3_256","prepareVoucher","rightPaddedHexBuffer","pad","padEnd","leftPaddedHexBuffer","padStart","TRANSACTION_DOMAIN_TAG","toString","addressBuffer","blockBuffer","argumentToString","stringify","scriptBuffer","script","signatureBuffer","signature","encode","msg","sha","SHA3","digest","validatePayload","computeLimit","proposalKey","keyId","sequenceNum","authorizers","authorizer","validateEnvelope","preparePayloadSignatures","signers","collectSigners","payloadSigs","sig","signerIndex","sort","a","b","Map","addSigner","set","forEach","validateVoucher","prepareSigs","sigs","envelopeSigs","payloadFields","field","checkField","proposalKeyFields","payloadSigsFields","index","payloadSigFields","envelopeSigsFields","envelopeSigFields","isObject","check","defaultVal","obj","base","missingFieldError","invalidFieldError","printFieldName","findInsideSigners","inside","add","proposer","p","delete","findOutsideSigners","outside","createSignableVoucher","buildAuthorizers","cid","withPrefix","prev","current","item","buildInsideSigners","buildOutsideSigners","voucherToTxId","buildPreSignable","f_type","f_vsn","roles","collectAccounts","last","ax","old","dupList","payerAccts","g","includes","multiAccts","curr","resolveAccounts","values","resolveSignatures","insideSigners","insidePayload","encodeInsideMessage","prepForEncoding","fetchSignature","outsideSigners","outsidePayload","encodeOutsideMessage","innerFetchSignature","signingFunction","buildSignable","payerAddress","resolveValidators","validators","cb","resolveFinalNormalization","resolveVoucherIntercept","noop","debug","accts","filter","Boolean","log","execFetchRef","execFetchSequenceNumber","sequenceNumber","predicate","send","resolveFn","defaultResolve","decodersFromConfig","pattern","fromEntries","findPayloadSigners","findEnvelopeSigners","envelope","UnableToDetermineMessageEncodingTypeForSignerAddress","constructor","signerAddress","encodeMessageFromSignable","signable","payloadSigners","envelopeSigners","isPayloadSigner","isEnvelopeSigner","ps","validator","atBlockHeight","height","atBlockId","sealed","authz","getEvents","eventType","start","end","getEventsAtBlockHeightRange","getEventsAtBlockIds","blockIds","getBlockHeader","getCollection","getTransactionStatus","getTransaction","limit","ping","ref","template","DEFAULT_COMPUTE_LIMIT","DEFAULT_SCRIPT_ACCOUNTS","DEFUALT_REF","voucherIntercept","resolveProposerSequenceNumber","responseModule","mockAccountResponse","numberOfKeys","_","mockGetBlockResponse","mockSend","execSend","idof","authzFn","fallbackSigningFunction","authzResolve","ROLE","authzResolveMany","run","VERSION","params"],"mappings":"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"}